<!-- app/views/admin/resort_filters/edit.html.erb -->
<div style="margin-top: 38px">
  <h6>Editing: Parking Profile <%= @profile.label %> for <%= @resort.resort_name %> Resort&nbsp;&nbsp;&nbsp;&nbsp;
    <%= link_to "Parking Profile Info Page", admin_show_parking_profile_path(@resort) %>&nbsp;&nbsp;&nbsp;&nbsp;
    <%= link_to "Resort Information Page", admin_resort_path(@resort) %>
  </h6>
  <hr/>
</div>
<%= form_with scope: :parking_profile,
              url: admin_update_parking_profile_url(resort_id: params[:resort_id], season: params[:season]),
              method: :patch do |f| %>

  <div data-controller="parking-profiles" class="w-75">
    <table class="table">
      <tr>
        <td>
          <div class="row">
            <span class="col-sm-2 col-form-label">Label:</span>
            <div class="col-sm-4">
              <%= f.text_field :label, class: "form-control", value: @profile.label %>
            </div>
          </div>
        </td>
        <td>
          <div class="row">
            <span class="col-sm-2 col-form-label">Season:</span>
            <div class="col-sm-4">
              <%= f.text_field :season, class: "form-control", required: true, value: @profile.season %>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <div class="row">
            <span class="col-sm-2 col-form-label">Effective From:</span>
            <div class="col-sm-4">
              <%= f.text_field :effective_from, class: "form-control", required: true, value: @profile.effective_from&.in_time_zone&.strftime("%Y-%m-%d %H:%M") %>
            </div>
          </div>
        </td>
        <td>
          <div class="row">
            <span class="col-sm-2 col-form-label">Effective To:</span>
            <div class="col-sm-4">
              <%= f.text_field :effective_to, class: "form-control", required: true, value: @profile.effective_to&.in_time_zone&.strftime("%Y-%m-%d %H:%M") %>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td colspan="2">
          <div class="row">
            <label class="col-sm-2 col-form-label">Overnight Parking:</label>
            <div class="col-sm-10" style="margin-top: 9px">
              <div class="form-check">
                <%= f.check_box :overnight, class: "form-check-input", checked: @profile.overnight %>
              </div>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td colspan="2">
          <div class="row">
            <label class="col-sm-2 col-form-label">Ready for release:</label>
            <div class="col-sm-10" style="margin-top: 9px">
              <div class="form-check">
                <%= f.check_box :live, class: "form-check-input", checked: @profile.live %>
              </div>
            </div>
          </div>
        </td>
      </tr>
    </table>

    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">Main</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="rules-tab" data-bs-toggle="tab" data-bs-target="#rules-tab-pane" type="button" role="tab" aria-controls="rules-tab-pane" aria-selected="false">Rules</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="faqs-tab" data-bs-toggle="tab" data-bs-target="#faqs-tab-pane" type="button" role="tab" aria-controls="faqs-tab-pane" aria-selected="false">FAQs</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="accessibility-tab" data-bs-toggle="tab" data-bs-target="#accessibility-tab-pane" type="button" role="tab" aria-controls="accessibility-tab-pane" aria-selected="false">Accessibility</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="media-tab" data-bs-toggle="tab" data-bs-target="#media-tab-pane" type="button" role="tab" aria-controls="media-tab-pane" aria-selected="false">Media</button>
      </li>
    </ul>

    <div class="tab-content" id="myTabContent" style="margin-bottom: 50px">
      <!-- Main -->
      <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
        <!-- Operations -->
        <div class="row g-3 align-items-start" style="margin-top: 20px; padding: 10px">
          <div class="col-md-3"><%= f.label :operations, class: "form-label" %></div>
          <div class="col d-flex flex-column">
            <div class="d-flex justify-content-between align-items-start">
              <span>{
  "operating_days": [
    {
      "day": "Friday",
      "hours": "10 AM - 8 PM",
      "order": 1
    },
    {
      "day": "Saturday & Sunday",
      "hours": "10 AM - 5 PM",
      "order": 2
    }
  ],
  "holiday_open_days": [
    {
      "date": "09-1-2025",
      "label": "Labor Day",
      "order": 1
    }
  ]
}</span>
            </div>
            <%= f.text_area :operations, rows: 2, class: "form-control mt-1", value: JSON.pretty_generate(@profile.operations || {}) %>
          </div>
        </div>

        <!-- Highway Parking -->
        <div class="row g-3 align-items-start" style="margin-top: 20px; padding: 10px">
          <div class="col-md-3"><%= f.label :highway_parking, class: "form-label" %></div>
          <div class="col d-flex flex-column">
            <div class="d-flex justify-content-between align-items-start">
              <span>{ "period": {"from_month_day":"11-01","to_month_day":"05-15"}, "rules":"No parking in designated avalanche..." }</span>
            </div>
            <%= f.text_area :highway_parking, rows: 2, class: "form-control mt-1", value: JSON.pretty_generate(@profile.highway_parking || {}) %>
          </div>
        </div>

        <!-- Links -->
        <div class="row g-3 align-items-start" style="margin-top: 20px; padding: 10px">
          <div class="col-md-3"><%= f.label :links, class: "form-label" %></div>
          <div class="col d-flex flex-column">
            <div class="d-flex justify-content-between align-items-start">
              <span>[{ "label":"Book a Reservation", "url":"https://…" }]</span>
            </div>
            <%= f.text_area :links, rows: 2, class: "form-control mt-1", value: JSON.pretty_generate(@profile.links || []) %>
          </div>
        </div>

        <!-- Sources -->
        <div class="row g-3 align-items-start" style="margin-top: 20px; padding: 10px">
          <div class="col-md-3"><%= f.label :sources, class: "form-label" %></div>
          <div class="col d-flex flex-column">
            <div class="d-flex justify-content-between align-items-start">
              <span>[{ "kind":"manual","name":"Alta Parking Page","url":"https://www.alta.com/getting-here/parking-info","copyright_ok_to_cache":false,"last_verified_at":"2024-12-01T20:33:00Z"}]</span>
            </div>
            <%= f.text_area :sources, rows: 2, class: "form-control mt-1", value: JSON.pretty_generate(@profile.sources || []) %>
          </div>
        </div>
      </div>

      <!-- Rules -->
      <div class="tab-pane fade" id="rules-tab-pane" role="tabpanel" aria-labelledby="rules-tab" tabindex="0">
        <div class="row g-3 align-items-start" style="margin-top: 20px; padding: 10px">
          <div class="col-md-3"><%= f.label :rules, class: "form-label" %></div>
          <div class="col d-flex flex-column">
            <div class="d-flex justify-content-between align-items-start">
              <span>[{ "topic":"No Reservations..", "details":"Mon–Thu..." }]</span>
            </div>
            <%= f.text_area :rules, rows: 4, class: "form-control mt-1", value: JSON.pretty_generate(@profile.rules || []) %>
          </div>
        </div>
      </div>

      <!-- FAQs -->
      <div class="tab-pane fade" id="faqs-tab-pane" role="tabpanel" aria-labelledby="faqs-tab" tabindex="0">
        <div class="row g-3 align-items-start" style="margin-top: 20px; padding: 10px">
          <div class="col-md-3"><%= f.label :faqs, class: "form-label" %></div>
          <div class="col d-flex flex-column">
            <div class="d-flex justify-content-between align-items-start">
              <span>[{ "q":"When do new..?", "a":"Every Sunday..." }]</span>
            </div>
            <%= f.text_area :faqs, rows: 4, class: "form-control mt-1", value: JSON.pretty_generate(@profile.faqs || []) %>
          </div>
        </div>
      </div>

      <!-- Accessibility -->
      <div class="tab-pane fade" id="accessibility-tab-pane" role="tabpanel" aria-labelledby="accessibility-tab" tabindex="0">
        <div class="row g-3 align-items-start" style="margin-top: 20px; padding: 10px">
          <div class="col-md-3"><%= f.label :accessibility, class: "form-label" %></div>
          <div class="col d-flex flex-column">
            <div class="d-flex justify-content-between align-items-start">
              <span>{ "ada_policy":"Best available parking for ADA...", "ev_charging":[{"location":"Albion","status":"available"}] }</span>
            </div>
            <%= f.text_area :accessibility, rows: 4, class: "form-control mt-1", value: JSON.pretty_generate(@profile.accessibility || {}) %>
          </div>
        </div>
      </div>

      <!-- Media -->
      <div class="tab-pane fade" id="media-tab-pane" role="tabpanel" aria-labelledby="media-tab" tabindex="0">
        <div class="row g-3 align-items-start" style="margin-top: 20px; padding: 10px">
          <div class="col-md-3"><%= f.label :media, class: "form-label" %></div>
          <div class="col d-flex flex-column">
            <div class="d-flex justify-content-between align-items-start">
              <span>{ "cameras":[{"name":"Albion Cam","image_url":"…","link":"…"}], "parking_link":"https://…" }</span>
            </div>
            <%= f.text_area :media, rows: 4, class: "form-control mt-1", value: JSON.pretty_generate(@profile.media || {}) %>
          </div>
        </div>
      </div>
    </div>

    <%= f.submit "Save", class: "btn btn-primary" %>
  </div>
<% end %>
